# Armageddon Framework v3.0.0 - File Organization Guide

## ğŸ“ Directory Structure (Standard ESP-IDF)

```
armageddon_framework/
â”œâ”€â”€ CMakeLists.txt                 # Root CMakeLists
â”œâ”€â”€ sdkconfig                      # ESP-IDF Configuration (provided)
â”œâ”€â”€ idf_component.yml              # Component dependencies
â”œâ”€â”€ .gitignore                     # Git ignore rules
â”œâ”€â”€ README.md                       # Project documentation
â”‚
â”œâ”€â”€ main/
â”‚   â”œâ”€â”€ CMakeLists.txt             # Main component register
â”‚   â”œâ”€â”€ Kconfig.projbuild          # KConfig for menuconfig (optional)
â”‚   â”‚
â”‚   â”œâ”€â”€ main.cpp                   # app_main + orchestration
â”‚   â”œâ”€â”€ framework.h                # Global framework structures
â”‚   â”œâ”€â”€ framework.cpp              # Framework implementation
â”‚   â”‚
â”‚   â”œâ”€â”€ badusb_ducky.h             # DuckyScript parser header
â”‚   â”œâ”€â”€ badusb_ducky.cpp           # DuckyScript parser implementation
â”‚   â”œâ”€â”€ badusb_keyboard.h          # Keyboard layouts header
â”‚   â”œâ”€â”€ badusb_keyboard.cpp        # Keyboard layouts implementation
â”‚   â”‚
â”‚   â”œâ”€â”€ tinyusb_descriptors.h      # USB descriptors header
â”‚   â”œâ”€â”€ tinyusb_descriptors.cpp    # USB descriptors implementation
â”‚   â”œâ”€â”€ tinyusb_hid_callbacks.h    # TinyUSB HID callbacks header
â”‚   â”œâ”€â”€ tinyusb_hid_callbacks.cpp  # TinyUSB HID callbacks implementation
â”‚   â”œâ”€â”€ tusb_config.h              # TinyUSB configuration
â”‚   â”‚
â”‚   â”œâ”€â”€ wifi_init.h                # WiFi initialization header
â”‚   â”œâ”€â”€ wifi_init.cpp              # WiFi initialization implementation
â”‚   â”œâ”€â”€ wifi_attacks.h             # WiFi attacks (scan, deauth) header
â”‚   â”œâ”€â”€ wifi_attacks.cpp           # WiFi attacks implementation
â”‚   â”‚
â”‚   â”œâ”€â”€ web_ui.h                   # Web UI / HTTP server header
â”‚   â”œâ”€â”€ web_ui.cpp                 # Web UI / HTTP server implementation
â”‚   â”œâ”€â”€ web_ui_html.h              # Web UI HTML/CSS/JS inline
â”‚   â”‚
â”‚   â”œâ”€â”€ logger.h                   # Logging system header
â”‚   â”œâ”€â”€ logger.cpp                 # Logging system implementation
â”‚   â”œâ”€â”€ config.h                   # Configuration / NVS header
â”‚   â”œâ”€â”€ config.cpp                 # Configuration / NVS implementation
â”‚   â”‚
â”‚   â””â”€â”€ linker.lf                  # Linker fragments (if needed)
â”‚
â”œâ”€â”€ build/                         # Generated by idf.py build
â””â”€â”€ .git/                          # Git repository
```

---

## ğŸ“‹ File Placement Summary

| File | Location | Purpose |
|------|----------|---------|
| `CMakeLists.txt` | Root | Project setup, includes $(IDF_PATH)/tools/cmake/project.cmake |
| `sdkconfig` | Root | ESP-IDF configuration (already provided) |
| `idf_component.yml` | Root | Manifest with required components |
| `.gitignore` | Root | Git ignore patterns |
| `README.md` | Root | Documentation (already provided) |
| `main/CMakeLists.txt` | main/ | Component registration with idf_component_register |
| `main/main.cpp` | main/ | app_main() entry point |
| `main/*.h` / `main/*.cpp` | main/ | All source files (27 total) |

---

## âœ… Checklist: Which Files Go Where

### Root Directory (4-5 files)
- [x] `CMakeLists.txt` â†’ Root
- [x] `sdkconfig` â†’ Root  
- [x] `idf_component.yml` â†’ Root
- [x] `.gitignore` â†’ Root
- [x] `README.md` â†’ Root

### main/ Directory (27 files - ALL in main/, no subdirs!)
- [x] `main/CMakeLists.txt`
- [x] `main/main.cpp`
- [x] `main/framework.h` + `framework.cpp`
- [x] `main/tusb_config.h`
- [x] `main/tinyusb_descriptors.h` + `tinyusb_descriptors.cpp`
- [x] `main/tinyusb_hid_callbacks.h` + `tinyusb_hid_callbacks.cpp`
- [x] `main/badusb_ducky.h` + `badusb_ducky.cpp`
- [x] `main/badusb_keyboard.h` + `badusb_keyboard.cpp`
- [x] `main/wifi_init.h` + `wifi_init.cpp`
- [x] `main/wifi_attacks.h` + `wifi_attacks.cpp`
- [x] `main/web_ui.h` + `web_ui.cpp`
- [x] `main/web_ui_html.h`
- [x] `main/logger.h` + `logger.cpp`
- [x] `main/config.h` + `config.cpp`

**Note:** No subdirectories in main/. All .h and .cpp files are directly in main/.

---

## ğŸ”§ CMakeLists.txt Locations

### 1. Root CMakeLists.txt
```
armageddon_framework/CMakeLists.txt
```

### 2. Main CMakeLists.txt
```
armageddon_framework/main/CMakeLists.txt
```

---

## ğŸ“¦ Components Setup

**idf_component.yml** in root references:
- esp_wifi
- esp_http_server
- tinyusb
- nvs_flash
- esp_netif
- etc.

**main/CMakeLists.txt** registers all source files via idf_component_register.

---

## ğŸš€ Build Command Flow

```bash
cd armageddon_framework/
idf.py set-target esp32s3
idf.py build
idf.py -p /dev/ttyUSB0 flash monitor
```

ESP-IDF will:
1. Read root CMakeLists.txt
2. Include project.cmake
3. Discover main/ component
4. Read main/CMakeLists.txt
5. Compile all SRCS
6. Link with dependencies from idf_component.yml

---

## âœ¨ Key Points

- **Simple structure:** Everything needed in main/, nothing scattered
- **Standard:** Follows official ESP-IDF best practices
- **Clean:** Only source files, no build artifacts in git
- **Modular:** Easy to add more components later

---

**All 27 files now have clear placement** âœ“
